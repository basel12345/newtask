!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms")):"function"==typeof define&&define.amd?define("@beyerleinf/ngx-dnd",["exports","@angular/core","@angular/forms"],t):t(((e=e||self).beyerleinf=e.beyerleinf||{},e.beyerleinf["ngx-dnd"]={}),e.ng.core,e.ng.forms)}(this,function(e,t,r){"use strict";var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function n(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){function e(e){this.name=e}return e.COPY=new e("copy"),e.LINK=new e("link"),e.MOVE=new e("move"),e.NONE=new e("none"),e}(),i=function(){function e(){this.onDragStartClass="dnd-drag-start",this.onDragEnterClass="dnd-drag-enter",this.onDragOverClass="dnd-drag-over",this.onSortableDragClass="dnd-sortable-drag",this.dragEffect=o.MOVE,this.dropEffect=o.MOVE,this.dragCursor="move",this.defaultCursor="pointer"}return e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),s=function(){function e(){this.allowedDropZones=[]}return e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),l=function(){return function(e,t,r,a){this.dragDropService=t,this.config=r,this.directive=a,this.element=e.nativeElement,this.directive.dragHandle=this.element}}();function c(e){return e!==undefined&&null!==e}var d=function(){function e(){}return e.prototype.getItemAt=function(e,t){return e[t]},e.prototype.indexOf=function(e,t){return e.indexOf(t)},e.prototype.removeItemAt=function(e,t){e.splice(t,1)},e.prototype.insertItemAt=function(e,t,r){e.splice(r,0,t)},e}(),p=function(){function e(){}return e.prototype.getItemAt=function(e,t){return e.at(t)},e.prototype.indexOf=function(e,t){return e.controls.indexOf(t)},e.prototype.removeItemAt=function(e,t){e.removeAt(t)},e.prototype.insertItemAt=function(e,t,r){e.insert(r,t)},e}(),g=function(){function e(e,t,r,a){var n=this;this.dragDropService=t,this.config=r,this.cdr=a,this._dragEnabled=!0,this.dropEnabled=!1,this.dropZones=[],this.cloneItem=!1,this.defaultCursor=this.config.defaultCursor,this.element=e.nativeElement,this.element.style.cursor=this.defaultCursor,this.element.ondragenter=function(e){return n.dragEnter(e)},this.element.ondragleave=function(e){return n.dragLeave(e)},this.element.ondrop=function(e){return n.drop(e)},this.element.ondragover=function(e){return n.dragOver(e),c(e.dataTransfer)&&(e.dataTransfer.dropEffect=n.config.dropEffect.name),!1},this.element.onmousedown=function(e){n.target=e.target},this.element.ondragstart=function(e){!c(n.dragHandle)||n.dragHandle.contains(n.target)?(n.dragStart(e),c(e.dataTransfer)&&e.dataTransfer.setData("text","")):e.preventDefault()},this.element.ondragend=function(e){n.element.parentElement&&n.dragHelper&&n.element.parentElement.removeChild(n.dragHelper),n.dragEnd(e),(n._dragHandle?n._dragHandle:n.element).style.cursor=n.defaultCursor}}return Object.defineProperty(e.prototype,"dragEnabled",{get:function(){return this._dragEnabled},set:function(e){this._dragEnabled=e,this.element.draggable=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragHandle",{get:function(){return this._dragHandle},set:function(e){this._dragHandle=e},enumerable:!0,configurable:!0}),e.prototype.detectChanges=function(){var e=this;setTimeout(function(){e.cdr&&!e.cdr.destroyed&&e.cdr.detectChanges()},250)},e.prototype.dragEnter=function(e){this.isDropAllowed(e)&&this.dragEnterCallback(e)},e.prototype.dragOver=function(e){this.isDropAllowed(e)&&(c(e.preventDefault)&&e.preventDefault(),this.dragOverCallback(e))},e.prototype.dragLeave=function(e){this.isDropAllowed(e)&&this.dragLeaveCallback(e)},e.prototype.drop=function(e){this.isDropAllowed(e)&&(this.preventAndStop(e),this.dropCallback(e),this.detectChanges())},e.prototype.dragStart=function(e){this.dragEnabled&&(this.dragDropService.allowedDropZones=this.dropZones,this.dragStartCallback(e))},e.prototype.dragEnd=function(e){this.dragDropService.allowedDropZones=[],this.dragEndCallback(e)},e.prototype.isDropAllowed=function(e){var t,r;if((this.dragDropService.isDragged||e.dataTransfer&&e.dataTransfer.files)&&this.dropEnabled){if(c(this.allowDrop))return this.allowDrop(this.dragDropService.dragData);if(0===this.dropZones.length&&0===this.dragDropService.allowedDropZones.length)return!0;try{for(var a=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}(this.dragDropService.allowedDropZones),n=a.next();!n.done;n=a.next()){var o=n.value;if(-1!==this.dropZones.indexOf(o))return!0}}catch(i){t={error:i}}finally{try{n&&!n.done&&(r=a["return"])&&r.call(a)}finally{if(t)throw t.error}}}return!1},e.prototype.preventAndStop=function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},e.prototype.dragEnterCallback=function(e){},e.prototype.dragOverCallback=function(e){},e.prototype.dragLeaveCallback=function(e){},e.prototype.dropCallback=function(e){},e.prototype.dragStartCallback=function(e){},e.prototype.dragEndCallback=function(e){},e.propDecorators={dropEnabled:[{type:t.Input}],effectAllowed:[{type:t.Input}],effectCursor:[{type:t.Input}],dropZones:[{type:t.Input}],allowDrop:[{type:t.Input}],dragImage:[{type:t.Input}],cloneItem:[{type:t.Input}],dragEnabled:[{type:t.Input}]},e}(),u=function(e){function r(r,a,n,o){var i=e.call(this,r,a,n,o)||this;return i.onDragStart=new t.EventEmitter,i.onDragEnd=new t.EventEmitter,i.onDragSuccess=new t.EventEmitter,i.defaultCursor=i.element.style.cursor,i.dragEnabled=!0,i}return n(r,e),r.prototype.dragStartCallback=function(e){this.dragDropService.isDragged=!0,this.dragDropService.dragData=this.dragData,this.dragDropService.onDragSuccessCallback=this.onDragSuccess,this.element.classList.add(this.config.onDragStartClass),this.onDragStart.emit({dragData:this.dragData,mouseEvent:e})},r.prototype.dragEndCallback=function(e){this.dragDropService.isDragged=!1,this.dragDropService.dragData=null,this.dragDropService.onDragSuccessCallback=null,this.element.classList.remove(this.config.onDragStartClass),this.onDragEnd.emit({dragData:this.dragData,mouseEvent:e})},r.decorators=[{type:t.Directive,args:[{selector:"[dnd-draggable]"}]}],r.ctorParameters=function(){return[{type:t.ElementRef},{type:s},{type:i},{type:t.ChangeDetectorRef}]},r.propDecorators={dragData:[{type:t.Input}],onDragStart:[{type:t.Output}],onDragEnd:[{type:t.Output}],onDragSuccess:[{type:t.Output}]},r}(g),h=function(e){function r(t,r,a,n){return e.call(this,t,r,a,n)||this}return n(r,e),r.decorators=[{type:t.Directive,args:[{selector:"[dnd-draggable-handle]"}]}],r.ctorParameters=function(){return[{type:t.ElementRef},{type:s},{type:i},{type:u}]},r}(l),D=function(e){function r(r,a,n,o){var i=e.call(this,r,a,n,o)||this;return i.onDropSuccess=new t.EventEmitter,i.onDragEnter=new t.EventEmitter,i.onDragOver=new t.EventEmitter,i.onDragLeave=new t.EventEmitter,i.dropEnabled=!0,i}return n(r,e),r.prototype.dragEnterCallback=function(e){this.dragDropService.isDragged&&(this.element.classList.add(this.config.onDragEnterClass),this.onDragEnter.emit({dragData:this.dragDropService.dragData,mouseEvent:e}))},r.prototype.dragOverCallback=function(e){this.dragDropService.isDragged&&(this.element.classList.add(this.config.onDragOverClass),this.onDragOver.emit({dragData:this.dragDropService.dragData,mouseEvent:e}))},r.prototype.dragLeaveCallback=function(e){this.dragDropService.isDragged&&(this.element.classList.remove(this.config.onDragOverClass),this.element.classList.remove(this.config.onDragEnterClass),this.onDragLeave.emit({dragData:this.dragDropService.dragData,mouseEvent:e}))},r.prototype.dropCallback=function(e){var t=e.dataTransfer;(this.dragDropService.isDragged||c(t)&&c(t.files))&&(this.onDropSuccess.emit({dragData:this.dragDropService.dragData,mouseEvent:e}),c(this.dragDropService.onDragSuccessCallback)&&this.dragDropService.onDragSuccessCallback.emit({dragData:this.dragDropService.dragData,mouseEvent:e}),this.element.classList.remove(this.config.onDragOverClass),this.element.classList.remove(this.config.onDragEnterClass))},r.decorators=[{type:t.Directive,args:[{selector:"[dnd-droppable]"}]}],r.ctorParameters=function(){return[{type:t.ElementRef},{type:s},{type:i},{type:t.ChangeDetectorRef}]},r.propDecorators={onDropSuccess:[{type:t.Output}],onDragEnter:[{type:t.Output}],onDragOver:[{type:t.Output}],onDragLeave:[{type:t.Output}]},r}(g),f=function(){function e(e){this.config=e}return Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),e.prototype.markSortable=function(e){c(this._element)&&this._element.classList.remove(this.config.onSortableDragClass),c(e)&&(this._element=e,this._element.classList.add(this.config.onSortableDragClass))},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:i}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(i))},token:e,providedIn:"root"}),e}(),b=function(e){function a(t,r,a,n,o){var i=e.call(this,t,r,a,n)||this;return i.sortableDataService=o,i._sortableData=[],i.dragEnabled=!1,i}return n(a,e),Object.defineProperty(a.prototype,"sortableData",{get:function(){return this._sortableData},set:function(e){this._sortableData=e,e instanceof r.FormArray?this._sortableHandler=new p:this._sortableHandler=new d,this.dropEnabled=!!this._sortableData},enumerable:!0,configurable:!0}),a.prototype.dragEnterCallback=function(e){if(this.sortableDataService.isDragged){var t=this.sortableDataService.sortableContainer.getItemAt(this.sortableDataService.index);this.indexOf(-1===t)&&(this.sortableDataService.sortableContainer.removeItemAt(this.sortableDataService.index),0===this.sortableDataService.sortableContainer.sortableData.length&&(this.sortableDataService.sortableContainer.dropEnabled=!0),this.insertItemAt(t,0),this.sortableDataService.sortableContainer=this,this.sortableDataService.index=0),this.detectChanges()}},a.prototype.getItemAt=function(e){return this._sortableHandler.getItemAt(this._sortableData,e)},a.prototype.indexOf=function(e){return this._sortableHandler.indexOf(this._sortableData,e)},a.prototype.removeItemAt=function(e){this._sortableHandler.removeItemAt(this._sortableData,e)},a.prototype.insertItemAt=function(e,t){this._sortableHandler.insertItemAt(this._sortableData,e,t)},a.decorators=[{type:t.Directive,args:[{selector:"[dnd-sortable-container]"}]}],a.ctorParameters=function(){return[{type:t.ElementRef},{type:s},{type:i},{type:t.ChangeDetectorRef},{type:f}]},a.propDecorators={sortableData:[{type:t.Input}]},a}(g),v=function(e){function r(r,a,n,o,i,s){var l=e.call(this,r,a,n,s)||this;return l.sortableContainer=o,l.sortableDataService=i,l.onDragSuccess=new t.EventEmitter,l.onDragStart=new t.EventEmitter,l.onDragOver=new t.EventEmitter,l.onDragEnd=new t.EventEmitter,l.onDropSuccess=new t.EventEmitter,l.dropZones=l.sortableContainer.dropZones,l.dragEnabled=!0,l.dropEnabled=!0,l}return n(r,e),r.prototype.dragStartCallback=function(){this.sortableDataService.isDragged=!0,this.sortableDataService.sortableContainer=this.sortableContainer,this.sortableDataService.index=this.sortableIndex,this.sortableDataService.markSortable(this.element),this.dragDropService.isDragged=!0,this.dragDropService.dragData=this.dragData,this.dragDropService.onDragSuccessCallback=this.onDragSuccess,this.onDragStart.emit(this.dragDropService.dragData)},r.prototype.dragOverCallback=function(){this.sortableDataService.isDragged&&this.element!==this.sortableDataService.element&&(this.sortableDataService.sortableContainer=this.sortableContainer,this.sortableDataService.index=this.sortableIndex,this.sortableDataService.markSortable(this.element),this.onDragOver.emit(this.dragDropService.dragData))},r.prototype.dragEndCallback=function(){this.sortableDataService.isDragged=!1,this.sortableDataService.sortableContainer=null,this.sortableDataService.index=null,this.sortableDataService.markSortable(null),this.dragDropService.isDragged=!1,this.dragDropService.dragData=null,this.dragDropService.onDragSuccessCallback=null,this.onDragEnd.emit(this.dragDropService.dragData)},r.prototype.dragEnterCallback=function(){if(this.sortableDataService.isDragged&&(this.sortableDataService.markSortable(this.element),this.sortableIndex!==this.sortableDataService.index||this.sortableDataService.sortableContainer.sortableData!==this.sortableContainer.sortableData)){var e=this.sortableDataService.sortableContainer.getItemAt(this.sortableDataService.index);this.sortableDataService.sortableContainer.removeItemAt(this.sortableDataService.index),0===this.sortableDataService.sortableContainer.sortableData.length&&(this.sortableDataService.sortableContainer.dropEnabled=!0),this.sortableContainer.insertItemAt(e,this.sortableIndex),this.sortableContainer.dropEnabled&&(this.sortableContainer.dropEnabled=!1),this.sortableDataService.sortableContainer=this.sortableContainer,this.sortableDataService.index=this.sortableIndex,this.detectChanges()}},r.prototype.dropCallback=function(){this.sortableDataService.isDragged&&(this.onDropSuccess.emit(this.dragDropService.dragData),this.dragDropService.onDragSuccessCallback&&this.dragDropService.onDragSuccessCallback.emit(this.dragDropService.dragData),this.sortableContainer.detectChanges())},r.decorators=[{type:t.Directive,args:[{selector:"[dnd-sortable]"}]}],r.ctorParameters=function(){return[{type:t.ElementRef},{type:s},{type:i},{type:b},{type:f},{type:t.ChangeDetectorRef}]},r.propDecorators={sortableIndex:[{type:t.Input}],dragData:[{type:t.Input}],onDragSuccess:[{type:t.Output}],onDragStart:[{type:t.Output}],onDragOver:[{type:t.Output}],onDragEnd:[{type:t.Output}],onDropSuccess:[{type:t.Output}]},r}(g),m=function(e){function r(t,r,a,n){return e.call(this,t,r,a,n)||this}return n(r,e),r.decorators=[{type:t.Directive,args:[{selector:"[dnd-sortable-handle]"}]}],r.ctorParameters=function(){return[{type:t.ElementRef},{type:s},{type:i},{type:v}]},r}(l),y=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[i]}},e.decorators=[{type:t.NgModule,args:[{declarations:[u,h,D,b,v,m],exports:[u,h,D,b,v,m]}]}],e}(),S=function(){return function(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=0),this.imageElement=e,this.x_offset=t,this.y_offset=r,"string"==typeof this.imageElement){var a=this.imageElement;this.imageElement=new HTMLImageElement,this.imageElement.src=a}}}(),E=function(){return function(){}}();e.DataTransferEffect=o,e.DndModule=y,e.DragDropConfig=i,e.DragDropData=E,e.DragDropService=s,e.DragDropSortableService=f,e.DragImage=S,e.DraggableDirective=u,e.DraggableHandleDirective=h,e.DroppableDirective=D,e.SortableContainerDirective=b,e.SortableDirective=v,e.SortableHandleDirective=m,e.ɵa=g,e.ɵb=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=beyerleinf-ngx-dnd.umd.min.js.map